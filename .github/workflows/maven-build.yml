name: Java CI with Maven

# 1. Triggers
# Run this workflow every time push to main/master 
# or open a Pull Request against main/master.
on:
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]

jobs:
  build:
    # 2. The Environment
    # Run on the latest Ubuntu Linux instance provided by GitHub
    runs-on: ubuntu-latest

    steps:
    # Step A: Checkout the code
    # This pulls code from the repository into the runner
    - name: Checkout code
      uses: actions/checkout@v4

    # Step B: Set up Java
    # Installs JDK 21 (matching your pom.xml)
    - name: Set up JDK 21
      uses: actions/setup-java@v4
      with:
        java-version: '21'
        distribution: 'temurin' # Eclipse Temurin is a standard, high-performance OpenJDK
        cache: 'maven'          # VITAL: Caches downloaded dependencies so future runs are faster

    # Step C: Run Tests
    # 'mvn -B test' runs Maven in Batch mode (less log noise) and executes the 'test' phase
    - name: Run JUnit Tests
      run: mvn -B test --file pom.xml